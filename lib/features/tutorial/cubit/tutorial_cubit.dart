import 'package:bloc/bloc.dart';
import 'package:firebase_storage/firebase_storage.dart';
import 'package:flutter/src/widgets/framework.dart';
import 'package:flutter_bloc/flutter_bloc.dart';
import 'package:meta/meta.dart';

part 'tutorial_state.dart';

class TutorialCubit extends Cubit<TutorialState> {
  TutorialCubit() : super(TutorialInitial());

  String videoUrl = '';
  List<Reference> videos = [];
  void fetchTutorial() async {
    final storageRef =
        FirebaseStorage.instanceFor(bucket: "gs://malware-guard.appspot.com")
            .ref();
    // await storageRef.child('videos').listAll().then((value) => {
    //       for (var element in value.items){
    //         print(element.getDownloadURL().then((value) => print(value)))
    //       }
    // }
    // );
    await storageRef.child('videos').listAll().then((value) => videos = value.items);

    emit(TutorialVideosLoadedState());
  }

  static TutorialCubit get(BuildContext context) => BlocProvider.of(context);
}
