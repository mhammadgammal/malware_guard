import 'package:flutter/material.dart';
import 'package:flutter_bloc/flutter_bloc.dart';
import 'package:malware_guard/core/router/app_navigator.dart';
import 'package:malware_guard/core/router/router_helper.dart';
import 'package:malware_guard/features/drawer/drawer_component.dart';
import 'package:malware_guard/features/tutorial/cubit/tutorial_cubit.dart';

class TutorialScreen extends StatelessWidget {
  const TutorialScreen({super.key});

  @override
  Widget build(BuildContext context) {
    return BlocBuilder<TutorialCubit, TutorialState>(
      builder: (context, state) {
        var cubit = TutorialCubit.get(context);
        return Scaffold(
          body: Row(
            children: [
              const NavigationDrawerComponent(),
              Expanded(
                child: ListView.builder(
                  itemCount: cubit.videos.length,
                  itemBuilder: (context, index) => SizedBox(
                    width: 100.0,
                    height: 100.0,
                    child: Card(
                      child: Padding(
                        padding: const EdgeInsetsDirectional.all(12.0),
                        child: ListTile(
                          title: Text(
                            'tutorial ${index + 1}',
                            style: TextStyle(
                                fontSize: 20,
                                fontWeight: FontWeight.bold,
                                color: Colors.white),
                          ),
                          trailing: Icon(Icons.arrow_forward_ios),
                          onTap: () async {
                            String url =
                                await cubit.videos[index].getDownloadURL();
                            print(url);
                            AppNavigator.navigateToPush(
                                context, RouterHelper.videoPlayer,
                                arg: url);
                          },
                        ),
                      ),
                    ),
                  ),
                ),
              )
            ],
          ),
        );
      },
    );
  }
}
