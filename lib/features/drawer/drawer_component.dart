import 'package:malware_guard/core/router/app_navigator.dart';
import 'package:malware_guard/core/theme/app_text_style.dart';
import 'package:flutter/material.dart';
import 'package:flutter_bloc/flutter_bloc.dart';

import 'cubit/navigation_cubit.dart';

class NavigationDrawerComponent extends StatelessWidget {
  const NavigationDrawerComponent({super.key});

  @override
  Widget build(BuildContext context) {
    return BlocBuilder<NavigationDrawerCubit, int>(
      builder: (builderContext, state) => SizedBox(
        width: 304.0,
        height: 993.0,
        child: Drawer(
          backgroundColor: const Color.fromRGBO(30, 29, 29, 1.0),
          child: Padding(
            padding: const EdgeInsetsDirectional.only(top: 40.0),
            child: Column(
              crossAxisAlignment: CrossAxisAlignment.start,
              children: [
                Expanded(
                  child: ListView.separated(
                      padding: EdgeInsets.zero,
                      itemBuilder: (context, index) => ListTile(
                            selected: state == index,
                            selectedTileColor: Colors.black87,
                            selectedColor: Colors.white,
                            leading: NavigationDrawerCubit.get(builderContext)
                                .mainScreens[index]
                                .icon,
                            title: Text(
                              NavigationDrawerCubit.get(builderContext)
                                  .mainScreens[index]
                                  .title,
                              style: AppTextStyle.font17White,
                            ),
                            onTap: () {
                              // Navigator.pop(context);
                              if (state != index){
                                NavigationDrawerCubit.get(builderContext)
                                    .onNavigationTileTapped(index);
                                AppNavigator.navigateTo(
                                    context,
                                    NavigationDrawerCubit.get(builderContext)
                                        .mainScreens[index]
                                        .dist);
                              }
                            },
                          ),
                      separatorBuilder: (_, __) => const SizedBox(
                            height: 10.0,
                          ),
                      itemCount:
                          NavigationDrawerCubit.get(builderContext).mainScreens.length),
                ),
                const Divider(
                  height: 10.0,
                  indent: 10.0,
                  endIndent: 10.0,
                ),
                const Padding(
                  padding: EdgeInsetsDirectional.only(start: 10.0, bottom: 10.0),
                  child: Text(
                    'How to Use',
                    style: TextStyle(
                        color: Colors.white,
                        fontSize: 17.0,
                        fontWeight: FontWeight.w400),
                  ),
                ),
                Expanded(
                    child: ListView.builder(
                  itemCount:
                      NavigationDrawerCubit.get(builderContext).howToUseScreens.length,
                  itemBuilder: (context, index) => ListTile(
                    selected: state == (NavigationDrawerCubit.get(builderContext)
                        .mainScreens
                        .length + index) ,
                    selectedTileColor: Colors.black87,
                    selectedColor: Colors.white,
                    leading: NavigationDrawerCubit.get(builderContext)
                        .howToUseScreens[index]
                        .icon,
                    title: Text(
                      NavigationDrawerCubit.get(builderContext)
                          .howToUseScreens[index]
                          .title,
                      style: AppTextStyle.font17White,
                    ),
                    onTap: () {
                      // Navigator.pop(context);
                      NavigationDrawerCubit.get(builderContext).onNavigationTileTapped(
                          index +
                              NavigationDrawerCubit.get(builderContext)
                                  .mainScreens
                                  .length);
                      AppNavigator.navigateTo(
                          context,
                          NavigationDrawerCubit.get(context)
                              .howToUseScreens[index]
                              .dist);
                    },
                  ),
                ))
              ],
            ),
          ),
        ),
      ),
    );
  }
}
