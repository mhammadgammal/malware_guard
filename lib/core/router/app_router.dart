import 'package:flutter/material.dart';
import 'package:flutter_bloc/flutter_bloc.dart';
import 'package:malware_guard/core/router/router_helper.dart';
import 'package:malware_guard/features/authentication/login/cubit/login_cubit.dart';
import 'package:malware_guard/features/authentication/signup/cubit/sign_up_cubit.dart';
import 'package:malware_guard/features/authentication/signup/sign_up_screen.dart';
import 'package:malware_guard/features/boarding/boarding_screen.dart';
import 'package:malware_guard/features/history/history.dart';
import 'package:malware_guard/features/home/home_screen.dart';
import 'package:malware_guard/features/scan/cubit/scan_cubit.dart';
import 'package:malware_guard/features/scan/scan_screen.dart';
import 'package:malware_guard/features/scan_settings/scan_settings.dart';
import 'package:malware_guard/features/settings/settings.dart';
import 'package:malware_guard/features/tutorial/tutorial_screen.dart';
import 'package:malware_guard/features/tutorial/video_player_widget.dart';
import '../../features/authentication/login/login_screen.dart';
import '../../features/history/cubit/history_cubit.dart';
import '../../features/home/cubit/home_cubit.dart';
import '../../features/tutorial/cubit/tutorial_cubit.dart';

class AppRouter {
  static final Map<String, WidgetBuilder> generateRoute = {
    RouterHelper.boarding: (_) => const BoardingScreen(),
    RouterHelper.home: (_) => BlocProvider(
          create: (_) => HomeCubit(),
          child: const HomeScreen(),
        ),
    RouterHelper.scan: (_) => BlocProvider(
          create: (context) => ScanCubit(),
          child: const ScanScreen(),
        ),
    RouterHelper.settings: (_) => const SettingsScreen(),
    RouterHelper.scanSettings: (_) => const ScanSettingsScreen(),
    RouterHelper.history: (_) => BlocProvider(
          create: (context) => HistoryCubit()..fetchHistory(),
          child: const HistoryScreen(),
        ),
    RouterHelper.tutorial: (_) => BlocProvider(
          create: (context) => TutorialCubit()..fetchTutorial(),
          child: TutorialScreen(),
        ),
    RouterHelper.signUp: (_) => BlocProvider(
        create: (BuildContext context) => SignUpCubit(),
        child: const SignUpScreen()),
    RouterHelper.login: (_) => BlocProvider(
          create: (context) => LoginCubit(),
          child: const LoginScreen(),
        ),
    RouterHelper.videoPlayer: (context) {
      var arg = ModalRoute.of(context)!.settings.arguments as String;
      print('arg: $arg');
      return VideoPlayerWidget(
        videoUrl: ModalRoute.of(context)!.settings.arguments as String,
      );
    },
  };
}
